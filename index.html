<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Calculator</title>
  <style>
    :root{
      --bg:#0f1724; /* dark blue */
      --panel:#0b1220;
      --accent:#1e90ff;
      --muted:#94a3b8;
      --button:#142033;
      --button-2:#17293f;
      --glass: rgba(255,255,255,0.03);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg,var(--bg),#071027 120%);
      color: #e6eef8;
      padding:24px;
    }

    .calculator{
      width:330px;
      max-width:96vw;
      background:linear-gradient(180deg,var(--panel), #08121b);
      border-radius:16px;
      padding:18px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.7);
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .display{
      background:var(--glass);
      padding:12px 14px;
      border-radius:10px;
      min-height:64px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:6px;
      text-align:right;
      word-break:break-all;
    }

    .display .prev{
      font-size:13px;
      color:var(--muted);
      min-height:16px;
    }
    .display .curr{
      font-size:28px;
      font-weight:600;
    }

    .keys{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }

    button{
      background:var(--button);
      border: none;
      padding:14px 10px;
      border-radius:10px;
      font-size:18px;
      color:inherit;
      box-shadow: inset 0 -2px 0 rgba(0,0,0,0.35);
      cursor:pointer;
      transition:transform .06s ease, box-shadow .06s ease;
      user-select:none;
    }
    button:active{transform:translateY(1px);}

    button.operator{
      background: linear-gradient(180deg,var(--button-2), #0f2a47);
      color: white;
    }

    button.double{
      grid-column: span 2;
    }

    .btn-ac{
      background: linear-gradient(180deg,#8741ff,#5b2bd4);
      color:#fff;
      font-weight:600;
    }

    .btn-equals{
      background: linear-gradient(180deg,var(--accent), #0066cc);
      color:white;
      font-weight:700;
      grid-row: span 2;
      align-self:stretch;
    }

    @media (max-width:400px){
      .calculator{width:300px}
      .display .curr{font-size:24px}
    }

    /* small helper text */
    .hint{font-size:12px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <main class="calculator" role="application" aria-label="Calculator">
    <div class="display" aria-live="polite">
      <div class="prev" id="prev">&nbsp;</div>
      <div class="curr" id="curr">0</div>
    </div>

    <div class="keys" role="group" aria-label="Calculator keys">
      <button class="btn-ac double" data-action="clear">AC</button>
      <button data-action="back">⌫</button>
      <button class="operator" data-action="op">÷</button>

      <button data-num>7</button>
      <button data-num>8</button>
      <button data-num>9</button>
      <button class="operator" data-action="op">×</button>

      <button data-num>4</button>
      <button data-num>5</button>
      <button data-num>6</button>
      <button class="operator" data-action="op">−</button>

      <button data-num>1</button>
      <button data-num>2</button>
      <button data-num>3</button>
      <button class="operator" data-action="op">+</button>

      <button data-num>0</button>
      <button data-num>.</button>
      <button class="btn-equals" data-action="equals">=</button>
    </div>

    <div class="hint">Tip: you can also use keyboard keys (numbers, + - * / Enter Backspace)</div>
  </main>

  <script>
    // Simple calculator logic
    const prevEl = document.getElementById('prev');
    const currEl = document.getElementById('curr');

    let prevValue = '';
    let currValue = '0';
    let operator = null;
    let resetNext = false;

    function updateDisplay(){
      prevEl.textContent = prevValue ? `${prevValue} ${operator || ''}`.trim() : '';
      currEl.textContent = currValue;
    }

    function appendNumber(num){
      if(resetNext){ currValue = (num === '.') ? '0.' : num; resetNext = false; return; }
      if(num === '.' && currValue.includes('.')) return;
      if(currValue === '0' && num !== '.') currValue = num;
      else currValue = currValue + num;
    }

    function chooseOperator(op){
      if(operator && !resetNext){
        compute();
      }
      operator = op;
      prevValue = currValue;
      resetNext = true;
    }

    function compute(){
      if(!operator || prevValue === '') return;
      const a = parseFloat(prevValue);
      const b = parseFloat(currValue);
      if(Number.isNaN(a) || Number.isNaN(b)) return;
      let result = 0;
      switch(operator){
        case '+': result = a + b; break;
        case '−': result = a - b; break;
        case '×': result = a * b; break;
        case '÷': result = b === 0 ? 'Error' : a / b; break;
        default: return;
      }
      currValue = (result === 'Error') ? 'Error' : String(roundAcc(result, 12));
      prevValue = '';
      operator = null;
      resetNext = true;
    }

    function roundAcc(num, places){
      // avoid floating point issues; keep to at most `places` decimals
      const factor = Math.pow(10, places);
      return Math.round((num + Number.EPSILON) * factor) / factor;
    }

    function clearAll(){ prevValue=''; currValue='0'; operator=null; resetNext=false; }
    function backspace(){ if(resetNext){ currValue='0'; resetNext=false; return; } if(currValue.length === 1) currValue='0'; else currValue = currValue.slice(0,-1); }

    document.querySelectorAll('[data-num]').forEach(btn=>{
      btn.addEventListener('click', ()=>{ appendNumber(btn.textContent); updateDisplay(); });
    });

    document.querySelectorAll('[data-action]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const act = btn.getAttribute('data-action');
        if(act === 'clear') { clearAll(); updateDisplay(); }
        else if(act === 'back') { backspace(); updateDisplay(); }
        else if(act === 'equals') { compute(); updateDisplay(); }
        else if(act === 'op') { chooseOperator(btn.textContent); updateDisplay(); }
      });
    });

    // keyboard support
    window.addEventListener('keydown', (e)=>{
      if((/^[0-9]$/).test(e.key)) { appendNumber(e.key); updateDisplay(); }
      else if(e.key === '.') { appendNumber('.'); updateDisplay(); }
      else if(e.key === 'Enter' || e.key === '=') { compute(); updateDisplay(); }
      else if(e.key === 'Backspace') { backspace(); updateDisplay(); }
      else if(e.key === 'Escape') { clearAll(); updateDisplay(); }
      else if(['+','-','*','/'].includes(e.key)){
        const map = {'+':'+','-':'−','*':'×','/':'÷'};
        chooseOperator(map[e.key]); updateDisplay();
      }
    });

    // init
    updateDisplay();
  </script>
</body>
</html>
